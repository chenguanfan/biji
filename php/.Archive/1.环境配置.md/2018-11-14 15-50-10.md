# 第一章:环境配置
[TOC]

## 一.集成环境PHPStudy下载与安装
1.下载phpstudy安装包:[http://phpstudy.net下载20161103版本](http://www.phpstudy.net/phpstudy/phpStudy20161103.zip)
2.安装前必须安装:vc++9  vc++11
3.我们安装到D:\PHPStudy目录
4.打开PHPStudy,启动服务....
    4.1 如果服务不能启动:1.检测防火墙 2.查看端口是否被占用 3.重新安装,安装时关掉相关杀毒软件与安全卫士.5.重复第二步:检测VC++运行库,最好是9-15各版本32位与64位全安装一遍.
```SHELL
MSSQL:1433 端口
apache:80 端口   
mysql:3306 端口

-- 查看本机端口使用情况
netstat -ano

-- 单独查看某个端口是否已打开(开启WINDOWS的TELNET客户端功能,在控制面板-->程序-->打开或关闭WINDOWS功能)
telnet IP 端口
```

## 二.手动安装Apache与PHP配置
1. 下载apache与php
下载apache
http://www.apachehaus.com/cgi-bin/download.plx
下载PHP:注意线程安全版本(Thread Safe)
http://windows.php.net/download#php-5.6

2. 把apache与php统一解压到D:\phpserver\下面.

3. 配置与安装Apache
去Apache目录下拿记事本打开:D:\phpserver\Apache24\conf\httd.conf  找到 Define SRVROOT "/Apache24"改成Define SRVROOT "D:/phpserver/Apache24"
安装Apache:以管理员身份启动DOS,进入到D:\phpserver\Apache24\bin目录,输入:httpd -k install (由于我安装了多次,为了服务名不重复 用了 -n 服务名参数) 等待安装完成.如果报错,重装.提示“The 'Apache2.4' service is successfully installed.”，说明安装成功
检查Apache是否安装成功:我的电脑右键-->管理-->服务与应用程序-->服务--找找有没有apache2.4这个服务(在DOS下输入services.msc)
把Apache2.4改成手动启动...  (net start apache2.4     停止:net  stop apache2.4)
卸载apache   (DOS管理员 --> sc delete apache2.4  注意:删除前必须先停止服务)

4. 让APACHE支持PHP(PHP的常用配置)
让 Apache 加载 PHP模块，打开 D:\phpserver\Apache24\conf\httpd.conf，在文件末尾增加
```php
PHPIniDir "D:\phpserver\php5.6.31x64"
LoadModule php5_module "D:\phpserver\php5.6.31x64\php5apache2_4.dll"
<IfModule php5_module>
AddType application/x-httpd-php .php
AddType application/x-httpd-php .php3
AddType application/x-httpd-php .php5
</IfModule>
```

5. PHP的基本配置与常用功能开启
打开 PHP 目录(D:\phpserver\php5.6.31x64)，复制 php.ini-development 文件，重命名为 php.ini 并打开，配置 PHP 扩展，去除下面几个常用扩展前面的分号“;”
```php
;extension_dir = "ext" 改成 extension_dir = "D:\phpserver\php5.6.31x64\ext"
;extension=php_curl.dll 改成 extension=php_curl.dll
;extension=php_gd2.dll 改成 extension=php_gd2.dll
;extension=php_mbstring.dll 改成 extension=php_mbstring.dll
;extension=php_mysql.dll 改成 extension=php_mysql.dll
;extension=php_mysqli.dll 改成 extension=php_mysqli.dll
;extension=php_pdo_mysql.dll 改成 extension=php_pdo_mysql.dll
```

6. 所有配置完成了记得重启Apache服务.........

## 三.IIS安装与PHP环境配置
1.安装IIS(XP下是6.0 win7下是7.5)
开始-->控制面板-->程序-->打开或关闭WINDOWS功能-->钩选internet information services可承载的web核心-->钩选Internet信息服务下面除(FTP服务器以外的)所有功能.

2.在IIS下配置PHP
开始-->控制面板-->管理工具(小图标视图)-->Internet 信息服务(IIS)管理器-->选择左边的根-->处理程序映射-->添加模块映射-->(请求路径:*.php ; 模块:FastCgiModule; 可执行文件:D:\phpStudy\php\php-5.4.45-nts\php-cgi.exe;名称:PHP)注:IIS配置PHP要求PHP是NTS(线程非安全)版本.

3.重启IIS,在C:\inetpub\wwwroot下创建PHP文件测试.

重要:IIS的正常维护与管理
1.把IIS Admin Service服务设为手动启动
服务名称：IISADMIN
显示名称：IIS Admin Service
描述：允许此服务器管理 IIS 元数据库。IIS 元数据库存储 SMTP 和 FTP 服务的配置。如果停止此服务，服务器将无法配置 SMTP 或 FTP。如果禁用此服务，则任何明确依赖于它的服务都将无法启动。
2.把World Wide Web Publishing Service服务设为手动启动
服务名称：W3SVC
显示名称：World Wide Web Publishing Service
描述：通过 Internet 信息服务管理器提供 Web 连接和管理
这样改了以后，下次使用时又要再开启需要多点几次鼠标，为了省事，我尝试着写了个开启和关闭服务的脚本，献丑了……互联网+搜索引擎=爱因斯坦 :)
将此文件保存为start_iis.cmd即可
```bat
@echo off
echo 开启IIS Admin Service
net start IISADMIN
echo 开启World Wide Web Publishing Service
net start W3SVC
pause
```

将此文件保存为stop_iis.cmd即可
```bat
@echo off
echo 停止IIS Admin Service
net stop IISADMIN
echo 停止World Wide Web Publishing Service
net stop W3SVC
pause
```



# 手动安装Apache与PHP
[TOC]

## 下载安装Apache
下载apache
http://www.apachehaus.com/cgi-bin/download.plx

![](./_image/2017-10-24-09-03-21.jpg)

下载PHP:注意线程安全版本(Thread Safe)
http://windows.php.net/download#php-5.6

![](./_image/2017-10-24-09-31-10.jpg)

安装Apache,我们下载的是解压绿色版本,不需要安装(只需要解压)
1.解压刚下载回来的 apache压缩包,放在一个文件夹下(路径不要包含空格与中文),我的是解压在D:\phpserver\Apache24
2.修改Apache目示下的配置文件:我的在:D:\phpserver\Apache24\conf\httpd.conf中的`Define SRVROOT "Apache24"`;为 `Define SRVROOT "D:\phpserver\Apache24" `我下载的是Apache2.4版本,在第38行.
3.安装Apache到操作系统服务.
    3.1 用管理员方式运行DOS,(开始-->所有程序-->附件-->命令提示符[鼠标右键]-->以管理员身份运行)
    3.2 在DOS下进入到Apache目录的bin目录下.(1.d:-->回车    2.cd phpserver\apache24\bin  或者 cd /d d:/phpserver/apache24/bin 一步到位 )
    3.3 在DOS下输入 httpd -k install  如果返回信息没有Err字样,则安装成功,一般成功返回`Apache2.4: Service is already installed.`字样.

![](./_image/2017-10-24-09-57-23.jpg)

3.4 检查Apache安装是否成功,在系统服务管理中查看.计算机[右键]-->管理-->服务与应用程序-->服务-->看有没有我们刚安装的Apache服务,我的是Apache2.4(在DOS下输入:services.msc ).

![](./_image/2017-10-24-10-18-48.jpg)
3.5 安装成功不一定能启动.
    常见不安装成功的问题:1.我们的计算机80端口必须没有被占用掉.查看本机所有端口占用情况:DOS命令:netstat -ano
3.5.1.如果80端口被占用.我们Apache也可以不用80端口,具体在httpd.conf文件的:     Listen 80  改成别的未被占用端口.如果不用80端口,以后我们访问此服务时必须在浏览器URL中加入端口号. 如:http://localhost:88
3.5.2 检查第一步中的:httpd.conf文件的Define SRVROOT "D:\phpserver\Apache24"  是否路径修改正确.
3.5.3 检查vc++库是否已安装.(vc9-vc14).

4.启动Apache服务,  在服务控制台中(参见3.4 ),找到Apache服务,我的是Apache2.4 右键-->启动,因为我们以后开发常用phpstudy集成环境,所以不想Apache2.4一开机就自动启动.我们要修改Apache2.4为手动启动.

![](./_image/2017-10-24-10-30-17.jpg)
启动与停止Apache2.4服务的批处理文件.
把下面内容放在记事本中.另存为桌面:启动Apache2.4.bat
```bat
@echo off
echo 开启Apache2.4
net start Apache2.4
pause
```
停止同上:
```bat
@echo off
echo 停止Apache2.4
net stop Apache2.4
pause
```
5.安装配置好Apache2.4后,成功启动它,我们就可以用浏览器来访问了.
    http://localhost    永远表示本机r
    http://127.0.0.1    永远表示本机
    用局域网IP也能访问:http://你的IP地址

6.让 Apache 支持PHP..
让 Apache 加载 PHP模块，打开httpd.conf文件: 我的在D:\phpserver\Apache24\conf\httpd.conf，在文件末尾增加下面内容
```php
PHPIniDir "D:\phpserver\php5.6.31x64"
LoadModule php5_module "D:\phpserver\php5.6.31x64\php5apache2_4.dll"
<IfModule php5_module>
AddType application/x-httpd-php .php
AddType application/x-httpd-php .php3
AddType application/x-httpd-php .php5
</IfModule>
```

![](./_image/2017-10-24-11-07-47.jpg)


7.测试Apache默认支持PHP吗? 找到刚安装好的这个apache的站点根目录.
    7.1 我们必须知道Apache的网站根目录在哪里.默认在:Apache目录下的htdocs目录,如果修改了参见httpd.conf中的DocumentRoot "${SRVROOT}/htdocs"
    7.2 在/htdocs下创建测试的PHP文件.我的在:D:\phpserver\Apache24\htdocs\test.php,然后确认Apache启动状态下在浏览器中输入:http://localhost/test.php  看是否能正常解析PHP.
    test.php内容
```php
<php?
    phpinfo();
?>
```

8.打开PHP的一些常用扩展.方便以后开发
打开 PHP 目录(我的解压在D:\phpserver\php5.6.31x64)，复制 php.ini-development 文件到当前文件夹下，重命名为 php.ini 并打开，配置 PHP 扩展，去除下面几个常用扩展前面的分号“;”
```php
;extension_dir = "ext" 改成 extension_dir = "D:\phpserver\php5.6.31x64\ext"
;extension=php_curl.dll 改成 extension=php_curl.dll
;extension=php_gd2.dll 改成 extension=php_gd2.dll
;extension=php_mbstring.dll 改成 extension=php_mbstring.dll
;extension=php_mysql.dll 改成 extension=php_mysql.dll
;extension=php_mysqli.dll 改成 extension=php_mysqli.dll
;extension=php_pdo_mysql.dll 改成 extension=php_pdo_mysql.dll
```
8.1.复制一份 php.ini-development
![](./_image/2017-10-24-11-22-04.jpg)
8.2.把复制出来的文件改名为php.ini

![](./_image/2017-10-24-11-23-42.jpg)
8.3.打开php.ini文件,找到下面内容
; extension_dir = "ext"
改成如下内容,注意是PHP目录的EXT文件夹路径,并去掉前面的分号与空格.
extension_dir = "D:\phpserver\php-5.6.31x64\ext"
![](./_image/2017-10-24-11-27-11.jpg)
8.4 找到内下内容,把前面的分号去掉.(开启常用的PHP扩展)
;extension=php_curl.dll 改成 extension=php_curl.dll
;extension=php_gd2.dll 改成 extension=php_gd2.dll
;extension=php_mbstring.dll 改成 extension=php_mbstring.dll
;extension=php_mysql.dll 改成 extension=php_mysql.dll
;extension=php_mysqli.dll 改成 extension=php_mysqli.dll
;extension=php_pdo_mysql.dll 改成 extension=php_pdo_mysql.dll
如图(修改前)
![](./_image/2017-10-24-11-29-19.jpg)
修改后

![](./_image/2017-10-24-11-31-05.jpg)


# 03 开发工具介绍与配置
[TOC]

## Hbuilder配置开发PHP
1.下载安装Hbuilder.绿色版本,下载解压就能用.但是要注意,解压后路径必须不带中文与空格.

2.让Hbuilder支持PHP代码提示很简单:联网-->工具-->插件安装-->钩选Aptana PHP-->确认,等安装完成重启软件.

安装好后如图:
![](./_image/2017-10-25-08-50-38.jpg)

3.我们开发PHP属于服务器程序,我们配置好PHP服务器环境后需要更改Hbuilder的配置.(配置外部服务器)

第一步:

![](./_image/2017-10-25-08-53-26.jpg)
第二步:

![](./_image/2017-10-25-08-54-36.jpg)
第三步:
(注意第三步中的如下图④:如果我们以后用新建WEB项目做项目,需要点包含,如果打开文件夹做项目,则点不包含).我们以后统一用新建WEB项目的方式(④选包含)
![](./_image/2017-10-25-08-56-17.jpg)
第四步:再打开设置WEB服务器(重复第一步).把HTML与PHP都放在外部服务器中访问.

![](./_image/2017-10-25-09-00-44.jpg)

4.新建WEB项目
文件(菜单)-->新建-->WEB项目
第一步:
![](./_image/2017-10-25-09-31-09.jpg)
第二步:

![](./_image/2017-10-25-09-32-30.jpg)

5.从别人电脑COPY或导入一个项目怎么做?把一个目录变成Hbuilder的WEB项目.

![](./_image/2017-10-25-09-34-04.jpg)

文件-->打开目录-->然后如下图(项目名建议别改,保持默认就是目录名)

![](./_image/2017-10-25-09-35-42.jpg)


